# Personal Diary for IN2018
**All Backend Coding is cooperate with Maksymilian except the part relate to Spring Security and RBAC Login**

- This PDF is generated by [Grip](https://github.com/joeyespo/grip) from Markdown file.
- If this PDF is hard to read, you can always go to the link below to get a better experience.
- https://github.com/luo200105/Public/edit/main/Private.md
- To check the Image Time Stamp please go to the following repo to check.
- https://github.com/IN2018-2022-15/Img-Host
- You Also can click the photo, it will redirect you to the Github Image Host Service. You can see the original size photo

**Table of Contents**

- [Personal Diary for IN2018](#personal-diary-for-in2018)
  * [20220202](#20220202)
  * [20220203](#20220203)
  * [20220204](#20220204)
  * [20220205](#20220205)
  * [20220206](#20220206)
  * [20220207](#20220207)
  * [20220208](#20220208)
  * [20220209](#20220209)
  * [20220210](#20220210)
  * [20220211](#20220211)
  * [20220212](#20220212)
  * [20220213](#20220213)
  * [20220214](#20220214)
  * [20220215](#20220215)
  * [20220216](#20220216)
  * [20220217](#20220217)
  * [20220218](#20220218)
  * [20220219](#20220219)
  * [20220220](#20220220)
  * [20220221](#20220221)
  * [20220222](#20220222)
  * [20220223](#20220223)
  * [20220224](#20220224)
  * [20220225](#20220225)
  * [20220226](#20220226)
  * [20220227](#20220227)
  * [20220228](#20220228)
  * [20220301](#20220301)
  * [20220302](#20220302)
  * [20220303](#20220303)
  * [20220304](#20220304)
  * [20220305](#20220305)
  * [20220306](#20220306)
  * [20220307](#20220307)
  * [20220308](#20220308)
  * [20220309](#20220309)
  * [20220310](#20220310)
  * [20220311](#20220311)
  * [20220312](#20220312)
  * [20220313](#20220313)

## 20220202
- Time: 14:00
- Group Meeting with Teammate and consualtant
- Duration: 80 min


## 20220203
- Time: 17:00
- Group Meeting with Teammate and Customer Interview
- Duration: 60 min

## 20220204
- Time: 10:00
- Duration: 75 min
- Do some research on tech stack
- Structure: PHP, VB, Cobol, front back sperate
- Frontend: React.js, Vue.js
- Components: Bootstrap, Element UI, Ant Design
- Backend: C++, Java, Python, Ruby on Rail, Go

## 20220205
- Time: 11:30
- Duration: 150min
- Validate feasibility
1. Structure, I deciced to use front back sperate. Because this kind of structure can be expand easily. And when we change the backend wont direct affact frontend
2. We use Vue.js as frontend. Because firstly Vue is faster than React. Then Vue support self define Event, React dont. At last Vue can load component on demand. React can not.
3. We use Ant design as component. Because it got better table function.
4. We use Java as backend, due to all of us doing pretty good on Java.

## 20220206
- Time: 19:00
- Duration: 60 min
- Do some research on middleware which is the API Layer
- Find out we do need a API layer for security and Agile development reason

## 20220207
1. - Time: 13:00
   - Duration: 70 min
   - Team member meeting
   - Discuss the tech stack and duty
2. - Time: 20:00
   - Duration: 15 min
   - Create Meeting Record


## 20220208
1. - Time: 9:30
   - Duration: 30 min
   - Create Project binder
2. - Time: 10:00
   - Duration: 60 min
   - Create Prototype
3. - Time: 11:00
   - Duration: 60 min
   - Draw GUI interface 

## 20220209
- break day

## 20220210
1. - Time: 15:00
   - Duration: 30 min
   - Meeting wth Consultant
2. - Time: 15:30
   - Duration: 10 min
   - Update Meeting Record
3. - Time: 19:00
   - Duration: 120 min
   - Create Generic GUI interface
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/VC/Panel.png)

## 20220211
1. - Time: 09:30
   - Duration: 60 min
   - Create Home Page
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Home%20Page.png)
2. - Time: 10:30
   - Duration: 25 min
   - Create Login box
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Home%20Page%20Expand.png)
3. - Time: 11:00
   - Duration: 90 min
   - Create Generic error success and notice box
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Error%20Page.png)
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Booking%20Confirm.png)
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Cancel%20Page.png)


## 20220212
- Time: 15:00
- Duration: 90 min
- Create Add stock page
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Add%20stock.png)

## 20220213
- break day

## 20220214
- Time: 19:00
- Duration: 80 min
- Create Add job page
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/New%20Booking.png)

## 20220215
1. - Time: 17:30
   - Duration: 30 Min
   - Team member meeting
   - Discuss Use case Diagram
2. - Time: 18:00
   - Duration: 10 min
   - Update Meeting Record
3. - Time: 18:10
   - Duration: 30 min
   - Update the Project Binder 

## 20220216
- break day

## 20220217
1. - Time: 15:00
   - Duration: 45 min
   - Meeting wth Consultant
2. - Time: 15:45
   - Duration: 10 min
   - Update Meeting Record
3. - Time: 16:00
   - Duration: 45 min
   - Create Modify job page
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Modify%20Booking.png)

## 20220218
1. - Time: 11:00
   - Duration: 75 min
   - Create Add Customer
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Add%20Customer.png)
2. - Time: 13:00
   - Duration: 45 min
   - Create Modify Customer page
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Modify%20Customer.png)

## 20220219
1. - Time: 09:30
   - Duration: 60 min
   - Create Search job page
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Search%20Booking.png)
2. - Time: 10:30
   - Duration: 45 min
   - Create Search customer page
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Search%20Customer.png)
3. - Time: 15:00
   - Duration: 60 min
   - Create stock check page
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Modify%20Customer.png)

## 20220220
- break day

## 20220221
1. - Time: 16:30
   - Duration: 60 min
   - Create order page
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Order.png)
2. - Time: 20:00
   - Duration: 60 min
   - Create invoice page
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Inovice.png)

## 20220222
- Time: 16:30
- Duration: 150 min
- Create Stock MOT and payment reminder page
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Stock%20Reminder.png)
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Payment%20Reminder.png)
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/MOT%20Reminder%20PDF.png)

## 20220223
1. - Time: 16:00
   - Duration: 30 min
   - Team member meeting
2. - Time: 16:30
   - Duration: 10 min
   - Update Meeting Record
3. - Time: 16:40
   - Duration: 30 min
   - Update the Project Binder 

## 20220224
1. - Time: 15:00
   - Duration: 30 min
   - Meeting wth Consultant
2. - Time: 16:30
   - Duration: 10 min
   - Update Meeting Record

## 20220225
- Time: 14:00
- Duration: 240 min
- Create Efficiency Report List
- Create Efficiency Report
- Create Booking Report List
- Create Book Report
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Efficiency%20Report%20List.png)
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Efficiency%20Report.png)
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Booking%20Report%20List.png)
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Booking%20Report.png)

## 20220226
- Time: 10:30
- Duration: 240 min
- Create Stock Report List
- Create Stock Report
- Create Invoice PDF
- Create Order PDF
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Stock%20Report%20List.png)
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Stock%20Report.png)
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Order%20Req.png)
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Invoice%20PDF.png)

## 20220227
- break day

## 20220228
- Time: 18:00
- Duration: 80 min
- Update Genric pop up box
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Success%20Page.png)
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Fatal%20Confirm.png)
![](https://raw.githubusercontent.com/IN2018-2022-15/Img-Host/main/Xd/Low%20Premission.png)

## 20220301
- Time: 19:00
- Duration: 120 min
- Finalize and refinement the GUI interface design

## 20220302
- Time: 14:00
- Duration: 90 min
- Create First delivery 

## 20220303
1. - Time: 13:30
   - Duration: 60 min
   - Meeting wth Consultant and Team member
2. - Time: 14:30
   - Duration: 10 min
   - Update Meeting Record
3. - Time: 14:40
   - Duration: 45 min
   - Update the first delivery 

## 20220304
1. - Time: 17:00
   - Duration: 30 min
   - Team member meeting
2. - Time: 17:30
   - Duration: 10 min
   - Update Meeting Record
3. - Time: 18:30
   - Duration: 70 min
   - Update the Project Binder 
4. - Time: 20:00
   - Duration: 120 min
   - Update the first delivery 

## 20220305
1. - Time: 20:00
   - Duration: 30 min
   - Team member meeting
2. - Time: 20:30
   - Duration: 10 min
   - Update Meeting Record
3. - Time: 20:40
   - Duration: 45 min
   - Finalize the first delivery and out put to PDF.
   - Submit it to moodle

## 20220306
- Reading week break

## 20220307
- Reading week break

## 20220308
- Reading week break

## 20220309
- Reading week break

## 20220310
- Break

## 20220311

## 20220312

## 20220313
- Time: 20:40
- Duration: 45 min
- Finalize the Project Binder and out put to PDF.
- Submit via email

## 20220314
- Break

## 20220315
- Break

## 20220316
- Break

## 20220317
- Time: 120 Min
- Adjust project structure
- Discuss the duty for final delivery

## 20220318
- Time: 120 Min
- Create example project "Verify"

## 20220319
- Time: 100 Min 
- Continue Example Project

## 20220320
- Break

## 20220321
- Time: 210 Min
- Finish Verify
- Show how to do the backend from scratch with Maksymilian

## 20220322
- Time: 240 Min
- Redesign the data structure in Database
- Do the Research about Role Base Access Control Login

## 20220323
- Break

## 20220324
- Time: 180 Min
- Do research about Spring Security

## 20220325
- Time: 180 Min
- Do the Research about Role Base Access Control Login

## 20220326
- Time: 300 Min
- Coding the Role Base Access Control Login

## 20220327
- Time: 120 Min
- Finish the Role Base Access Control Login

**RBAC Login Code - Spring Security Override**
```Java

package com.in2018.backend.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;
import org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.web.cors.CorsConfiguration;
import org.springframework.web.cors.CorsConfigurationSource;
import org.springframework.web.cors.UrlBasedCorsConfigurationSource;

@Configuration
@EnableWebSecurity
@EnableGlobalMethodSecurity(prePostEnabled = true)
public class SecurityConfig extends WebSecurityConfigurerAdapter {
    @Bean
    public UserDetailsService userDetailsService() {
        return new UserDetailServiceOverride();
    }

    @Bean
    PasswordEncoder getPasswordEncoder() {
        return new BCryptPasswordEncoder();
    }

    @Override
    protected void configure(AuthenticationManagerBuilder auth) throws Exception {
        auth.userDetailsService(userDetailsService());
    }

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http.authorizeRequests().antMatchers("/index").permitAll().anyRequest().authenticated().and()
                .formLogin().permitAll().successForwardUrl("/").and().logout().permitAll().and().csrf().disable().httpBasic();
    }
    @Bean
    CorsConfigurationSource corsConfigurationSource() {
        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
        source.registerCorsConfiguration("/**", new CorsConfiguration().applyPermitDefaultValues());
        return source;
    }
}
```

## 20220328
- Break

## 20220329
- Time: 240 Min
- Create User POJO and User DAO for Spring Security
**User POJO**
```Java
package com.in2018.backend.pojo;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name = "user")
public class User {
    @Id
    @Column(name = "id")
    private Long id;

    @Column(name = "fullName")
    private String fullName;

    @Column(name = "username")
    private String username;

    @Column(name = "password")
    private String password;

    @Column(name = "email")
    private String email;

    @Column(name = "phone")
    private String phone;

    @Column(name = "address")
    private String address;

    @Column(name = "role")
    private String role;

    @Column(name = "labourRate")
    private float labourRate;

    @Column(name = "isActive")
    private boolean isActive;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getFullName() {
        return fullName;
    }

    public void setFullName(String fullName) {
        this.fullName = fullName;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getPhone() {
        return phone;
    }

    public void setPhone(String phone) {
        this.phone = phone;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    public String getRole() {
        return role;
    }

    public void setRole(String role) {
        this.role = role;
    }

    public float getLabourRate() {
        return labourRate;
    }

    public void setLabourRate(float labourRate) {
        this.labourRate = labourRate;
    }

    public boolean isActive() {
        return isActive;
    }

    public void setActive(boolean active) {
        isActive = active;
    }
}



```

## 20220330
- Time: 90 Min
- Create User Detail Service Override for Spring Security
```Java
package com.in2018.backend.config;

import com.in2018.backend.dao.User_dao;
import com.in2018.backend.pojo.User;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.core.authority.SimpleGrantedAuthority;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.core.userdetails.UsernameNotFoundException;

import java.util.ArrayList;
import java.util.List;
import java.util.Optional;

public class UserDetailServiceOverride implements UserDetailsService {

    @Autowired
    User_dao user_dao;

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        User user = user_dao.findByUsername(username);
        if (user == null) {
            throw new UsernameNotFoundException("User not found");
        } else {
            List<SimpleGrantedAuthority> authorities = new ArrayList<SimpleGrantedAuthority>();
            authorities.add(new SimpleGrantedAuthority(user.getRole()));
            return new org.springframework.security.core.userdetails.User(user.getUsername(), user.getPassword(), authorities);
        }

    }
}

```

## 20220331
- Time: 150 Min
- Create Temperate User DAO and User Controller
- Test RBAC Login

## 20220401
- Time: 120 Min
- Create Job POJO and Job DAO
**Job POJO**
```Java
package com.in2018.backend.pojo;

import javax.persistence.*;
import java.time.LocalDate;

@Entity
@Table(name = "job")

public class Job {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue
    @Column(name = "id")
    private Long id;

    @Column(name = "customer_id")
    private Long customerId;

    @Column(name = "work_required_description")
    private String workRequiredDescription;

    //double because maybe 3.75 hours
    @Column(name = "estimated_time")
    private double estimatedTime;

    @Column(name = "carried_out_description")
    private String workCarriedOutDescription;

    @Column(name = "actual_time")
    private double actualTime;

    @Column(name = "status")
    private String status;

    @Column(name = "date_booked")
    private LocalDate dateBookedIn;

    @Column(name = "date_completed")
    private LocalDate dateCompleted;

    @Column(name = "invoice_id")
    private Long invoiceId;

    @Column(name = "engineerId")
    private Long engineerId;

    @Column(name = "vehicle_id")
    private Long vehicleId;

    public Job() {
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public Long getCustomerId() {
        return customerId;
    }

    public void setCustomerId(Long customerId) {
        this.customerId = customerId;
    }

    public String getWorkRequiredDescription() {
        return workRequiredDescription;
    }

    public void setWorkRequiredDescription(String workRequiredDescription) {
        this.workRequiredDescription = workRequiredDescription;
    }

    public double getEstimatedTime() {
        return estimatedTime;
    }

    public void setEstimatedTime(double estimatedTime) {
        this.estimatedTime = estimatedTime;
    }

    public String getWorkCarriedOutDescription() {
        return workCarriedOutDescription;
    }

    public void setWorkCarriedOutDescription(String workCarriedOutDescription) {
        this.workCarriedOutDescription = workCarriedOutDescription;
    }

    public double getActualTime() {
        return actualTime;
    }

    public void setActualTime(double actualTime) {
        this.actualTime = actualTime;
    }

    public String getStatus() {
        return status;
    }

    public void setStatus(String status) {
        this.status = status;
    }

    public LocalDate getDateBookedIn() {
        return dateBookedIn;
    }

    public void setDateBookedIn(LocalDate dateBookedIn) {
        this.dateBookedIn = dateBookedIn;
    }

    public LocalDate getDateCompleted() {
        return dateCompleted;
    }

    public void setDateCompleted(LocalDate dateCompleted) {
        this.dateCompleted = dateCompleted;
    }

    public Long getInvoiceId() {
        return invoiceId;
    }

    public void setInvoiceId(Long invoiceId) {
        this.invoiceId = invoiceId;
    }

    public Long getEngineerId() {
        return engineerId;
    }

    public void setEngineerId(Long engineerId) {
        this.engineerId = engineerId;
    }

    public Long getVehicleId() {
        return vehicleId;
    }

    public void setVehicleId(Long vehicleId) {
        this.vehicleId = vehicleId;
    }

    public Job(Long id, Long customerId, String workRequiredDescription, double estimatedTime, String workCarriedOutDescription, double actualTime, String status, LocalDate dateBookedIn, LocalDate dateCompleted, Long invoiceId, Long engineerId, Long vehicleId) {
        this.id = id;
        this.customerId = customerId;
        this.workRequiredDescription = workRequiredDescription;
        this.estimatedTime = estimatedTime;
        this.workCarriedOutDescription = workCarriedOutDescription;
        this.actualTime = actualTime;
        this.status = status;
        this.dateBookedIn = dateBookedIn;
        this.dateCompleted = dateCompleted;
        this.invoiceId = invoiceId;
        this.engineerId = engineerId;
        this.vehicleId = vehicleId;
    }
}
```
**Job DAO**
```Java
package com.in2018.backend.dao;

import com.in2018.backend.pojo.Job;
import com.in2018.backend.pojo.User;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.JpaSpecificationExecutor;
import org.springframework.data.jpa.repository.Query;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;

import java.util.List;

@Repository
@Transactional
public interface Job_dao extends JpaRepository<Job, Long>, JpaSpecificationExecutor<Job> {

    @Query("select j from Job j where j.id = ?1")
    Job findJobById(Long id);

    @Query("select j from Job j where j.status = ?1")
    List<Job> findJobsByStatus(String status);
}

```
## 20220402
- Time: 480 Min
- Create Customer Pojo
- Create Customer DAO
- Create Customer Controller

## 20220403
- Time: 150 Min
- Create Consumption POJO
- Create Consumption DAO

## 20220404
- Time: 360 Min
- Research about Apache Freemarker

## 20220405
- Time: 480 Min
- Create Report Pojo
- Create Report Dao
- Create Report Controller
- Create Part Order Pojo
- Create Part Order DAO
- Create Part Order Controller

## 20220406
- Time: 240 Min
- Debug Maksymilian Code
- Extend Maksymilian Code

## 20220407
- Time: 360 Min
- Create MOT Reminder Template
- Create Job Report Template
- Create Stock report Template

## 20220408
- Time: 300 Min
- Create Discount Controller
- Connect with Amazon S3
- Create data base backup function 

## 20220409
- Break

## 20220410
- Time: 420 Min
- Debug Extend and Modify Maksymilian code
- Serializable all function

## 20220411
- Time: 20 Hour
- Refine Data
- DeBug
- Test all backend API
- Did not sleep over night

## 20220412
- Time: 180 Min
- Test API
- Presentation
- Bad new day

# EOF
